#!groovy
import hudson.EnvVars
import jenkins.model.*

node {

    stage("SCM") {
        //git 'https://github.com/hussopa/SWD4TA002-3001/'
        //git branch: 'master'
        def branch = params.REVISION ?: 'master'
        checkout ( [$class: 'GitSCM',
        branches: [[name: branch ]],
        userRemoteConfigs: [[
            url: 'https://github.com/hussopa/jenkins-poc/']]])
        //checkout([$class: 'GitSCM', branches: [[name: "$params.REVISION"]], doGenerateSubmoduleConfigurations: false, extensions: [], submoduleCfg: [], userRemoteConfigs: [[url: 'https://github.com/hussopa/SWD4TA002-3001/']]])
    }
    
    stage('build'){
        currentBuild.description = "$params.REVISION"
            dir("src") {
                sh "python3 generator.py"
            }
    }
    
    stage('post-build actions'){
        archiveArtifacts 'src/*.txt'
    }
}
